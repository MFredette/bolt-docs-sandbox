<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.type" content="topic"><meta name="DC.relation" scheme="URI" content="bolt_release_notes.html"><meta name="DC.creator" content="Jean Bond <jean@puppet.com\&gt;"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="resolved-issues"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Resolved issues</title></head><body id="resolved-issues"><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Resolved issues</h1><div class="body"><p class="p">Security and bug fixes in the Bolt 1.x release series.</p></div><nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="bolt_release_notes.html">Bolt release notes</a></div></div></nav><article class="topic nested1" aria-labelledby="ariaid-title2" id="modulepath-now-handles-folder-names-in-uppercase-characters-on-windows-1260"><h2 class="title topictitle2" id="ariaid-title2">Modulepath now handles folder names in uppercase characters on Windows \(1.26.0\)</h2><div class="body"><p class="p">Bolt now prints a warning stating that it is case sensitive when the specified path is not found but another path is found with different capitalization. For example, if the actual path is <code class="ph codeph">C:\User\Administrator\modules</code> but the user specifies <code class="ph codeph">C:\user\administrator\modules</code>, a warning states that the specified path was not used and that the correct path is <code class="ph codeph">C:\User\Administrator\modules</code>. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1318" target="_blank">BOLT-1318</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="outmessage-didnt-work-inside-without-default-logging-1250"><h2 class="title topictitle2" id="ariaid-title3"><code class="ph codeph">out::message</code> didn't work inside <code class="ph codeph">without_default_logging</code> \(1.25.0\)</h2><div class="body"><p class="p">The <code class="ph codeph">out::message</code> standard library plan function now works within a <code class="ph codeph">without_default_logging</code> block. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1406" target="_blank">BOLT-1406</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title4" id="task-action-stub-parameter-method-incorrectly-merged-options-and-arguments-1250"><h2 class="title topictitle2" id="ariaid-title4">Task action stub parameter method incorrectly merged options and arguments \(1.25.0\)</h2><div class="body"><p class="p">When a task action stub expectation fails, the expected parameters are now properly displayed. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1399" target="_blank">BOLT-1399</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title5" id="the-wait-until-available-function-returned-incorrect-results-using-orchestrator-1230"><h2 class="title topictitle2" id="ariaid-title5">The <code class="ph codeph">wait_until_available</code> function returned incorrect results using orchestrator \(1.23.0\)</h2><div class="body"><p class="p">When using the PCP transport, the plan function <code class="ph codeph">wait_until_available</code> now returns error results only for targets that can't be reached. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1382" target="_blank">BOLT-1382</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title6" id="powershell-tasks-on-localhost-didnt-use-correct-default-ps-args-1230"><h2 class="title topictitle2" id="ariaid-title6">PowerShell tasks on localhost didn't use correct default PS\_ARGS \(1.23.0\)</h2><div class="body"><p class="p">PowerShell scripts and tasks run over the local transport on Windows hosts no longer load profiles and are run with the <code class="ph codeph">Bypass</code> execution policy to maintain parity with the WinRM transport. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1358" target="_blank">BOLT-1358</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title7" id="inventory-was-loaded-for-commands-that-didnt-use-it-1200"><h2 class="title topictitle2" id="ariaid-title7">Inventory was loaded for commands that didn't use it \(1.20.0\)</h2><div class="body"><p class="p">Inventory was loaded even for commands that don't use targets, such as <code class="ph codeph">bolt task show</code>. An error in the inventory could subsequently cause the command to fail. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1268" target="_blank">BOLT-1268</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title8" id="yaml-plan-converter-wrapped-single-line-evaluation-steps-1200"><h2 class="title topictitle2" id="ariaid-title8">YAML plan converter wrapped single-line evaluation steps \(1.20.0\)</h2><div class="body"><p class="p">The <code class="ph codeph">bolt plan convert</code> command wrapped single-line evaluation steps in a <code class="ph codeph">with()</code> statement unnecessarily. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1299" target="_blank">BOLT-1299</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title9" id="file-upload-stalled-with-local-transport-using-run-as-1180"><h2 class="title topictitle2" id="ariaid-title9">File upload stalled with local transport using <code class="ph codeph">run-as</code> \(1.18.0\)</h2><div class="body"><p class="p">The <code class="ph codeph">bolt file upload</code> command stalled when using local the local transport if the destination file existed. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1262" target="_blank">BOLT-1262</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title10" id="rerun-file-wasnt-generated-without-an-existing-project-directory-1180"><h2 class="title topictitle2" id="ariaid-title10">Rerun file wasn't generated without an existing project directory \(1.18.0\)</h2><div class="body"><p class="p">If no Bolt project directory existed, a&nbsp;<code class="ph codeph">.rerun.json</code>&nbsp;file wasn't created, preventing you from rerunning failed commands. Bolt now creates a default project directory when one doesn't exist so that <code class="ph codeph">.rerun.json</code> files are generated as expected. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1263" target="_blank">BOLT-1263</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title11" id="selinux-management-didnt-work-on-localhost-1170"><h2 class="title topictitle2" id="ariaid-title11">SELinux management didn't work on localhost \(1.17.0\)</h2><div class="body"><p class="p">Bolt now ships with components similar to the Puppet agent to avoid discrepancies between using a puppet-agent to apply Puppet code locally versus using the Bolt puppet-agent. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1244" target="_blank">BOLT-1244</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title12" id="linux-implementation-of-the-service-and-package-tasks-returned-incorrect-results-1160"><h2 class="title topictitle2" id="ariaid-title12">Linux implementation of the service and package tasks returned incorrect results \(1.16.0\)</h2><div class="body"><p class="p">The PowerShell and bash implementations for the service and package tasks are more robust and provide output more consistent with the Ruby implementation. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1103" target="_blank">BOLT-1103</a>, <a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1104" target="_blank">BOLT-1104</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title13" id="remote-tasks-could-run-on-non-remote-targets-1150"><h2 class="title topictitle2" id="ariaid-title13">Remote tasks could run on non-remote targets \(1.15.0\)</h2><div class="body"><p class="p">Remote tasks can now be run only on remote targets \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1203" target="_blank">BOLT-1203</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title14" id="known-hosts-werent-parsed-correctly-1150"><h2 class="title topictitle2" id="ariaid-title14"><code class="ph codeph">known_hosts</code> weren't parsed correctly \(1.15.0\)</h2><div class="body"><p class="p">Previously, when a valid hostname entry was present in <code class="ph codeph">known_hosts</code> and the <code class="ph codeph">host-key-check</code> SSH configuration option was set, host key validation could fail when a valid IP address was not included in the <code class="ph codeph">known_hosts</code> entry. This behavior was inconsistent with system SSH where the IP address is not required. Host key checking has been updated to match system SSH. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-495" target="_blank">BOLT-495</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title15" id="plan-variables-were-visible-to-sub-plans-1150"><h2 class="title topictitle2" id="ariaid-title15">Plan variables were visible to sub-plans \(1.15.0\)</h2><div class="body"><p class="p">Variables defined in scope in a plan were visible to sub-plans called with <code class="ph codeph">run_plan</code>. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1190" target="_blank">BOLT-1190</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title16" id="the--run-as-option-was-clobbered-by-configuration-1131"><h2 class="title topictitle2" id="ariaid-title16">The <code class="ph codeph">_run_as</code> option was clobbered by configuration \(1.13.1\)</h2><div class="body"><p class="p">The <code class="ph codeph">run-as</code> configuration option took precedence over the <code class="ph codeph">_run_as</code> parameter when calling <code class="ph codeph">run_*</code> functions in a plan. The <code class="ph codeph">_run_as</code> parameter now has a higher priority than config or CLI. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1050" target="_blank">BOLT-1050</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title17" id="tasks-with-certain-configuration-options-failed-when-using-stdin-1131"><h2 class="title topictitle2" id="ariaid-title17">Tasks with certain configuration options failed when using <code class="ph codeph">stdin</code> \(1.13.1\)</h2><div class="body"><p class="p">When both <code class="ph codeph">interpreters</code> and <code class="ph codeph">run-as</code> were configured, tasks that required parameters to be passed over <code class="ph codeph">stdin</code> failed. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1155" target="_blank">BOLT-1155</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title18" id="ruby-task-helper-symbolized-only-top-level-parameter-keys-1130"><h2 class="title topictitle2" id="ariaid-title18">Ruby task helper symbolized only top-level parameter keys \(1.13.0\)</h2><div class="body"><p class="p">Previously the <code class="ph codeph">ruby_task_helper``TaskHelper.run</code> method symbolized only-top level parameter keys. Now nested keys are also symbolized. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1053" target="_blank">BOLT-1053</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title19" id="string-segments-in-commands-had-to-be-triple-quoted-in-powershell-1120"><h2 class="title topictitle2" id="ariaid-title19">String segments in commands had to be triple-quoted in PowerShell \(1.12.0\)</h2><div class="body"><p class="p">When running Bolt in PowerShell with commands to be run on \*nix nodes, string segments that could be interpreted by PowerShell needed to be triple-quoted. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-159" target="_blank">BOLT-159</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title20" id="unsecured-download-of-the-puppet-agentinstall-task-1110"><h2 class="title topictitle2" id="ariaid-title20">Unsecured download of the <code class="ph codeph">puppet_agent::install</code> task \(1.11.0\)</h2><div class="body"><p class="p">The bash implementation of the <code class="ph codeph">puppet_agent::install</code> task now downloads packages over HTTPS instead of HTTP. This fix ensures the download is authenticated and secures against a man-in-the-middle attack.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title21" id="unsecured-download-of-the-puppet-agentinstall-powershell-task-1100"><h2 class="title topictitle2" id="ariaid-title21">Unsecured download of the <code class="ph codeph">puppet_agent::install_powershell</code> task \(1.10.0\)</h2><div class="body"><p class="p">The PowerShell implementation of the <code class="ph codeph">puppet_agent::install</code> task now downloads Windows .msi files using HTTPS instead of HTTP. This fix ensures the download is authenticated and secures against a man-in-the-middle attack.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title22" id="bolt-crashed-if-puppetdb-configuration-was-invalid-190"><h2 class="title topictitle2" id="ariaid-title22">Bolt crashed if PuppetDB configuration was invalid \(1.9.0\)</h2><div class="body"><p class="p">If an invalid <code class="ph codeph">puppetdb.conf</code> file is detected, Bolt now issues a warning instead of crashing \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-756" target="_blank">BOLT-756</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title23" id="local-transport-returned-incorrect-exit-status-190"><h2 class="title topictitle2" id="ariaid-title23">Local transport returned incorrect exit status \(1.9.0\)</h2><div class="body"><p class="p">Local transport now correctly returns an exit code instead of the <a class="xref" href="https://ruby-doc.org/core-2.5.0/Process/Status.html#method-i-to_i" target="_blank">stat of the process status as an integer</a>. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1074" target="_blank">BOLT-1074</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title24" id="standard-library-functions-werent-packaged-in-180-181"><h2 class="title topictitle2" id="ariaid-title24">Standard library functions weren't packaged in 1.8.0 \(1.8.1\)</h2><div class="body"><p class="p">Version 1.8.0 didn't include new standard library functions as intended. This release now includes standard library functions in the gem and packages. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1065" target="_blank">BOLT-1065</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title25" id="puppet-agentinstall-task-didnt-match-on-red-hat-180"><h2 class="title topictitle2" id="ariaid-title25"><code class="ph codeph">puppet_agent::install</code> task didn't match on Red Hat \(1.8.0\)</h2><div class="body"><p class="p">The <code class="ph codeph">puppet_agent::install</code> task now uses updates in the <code class="ph codeph">facts</code> task to resolve Red Hat operating system facts and to download the correct <code class="ph codeph">puppet-agent</code> package. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-997" target="_blank">BOLT-997</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title26" id="select-module-content-missing-from-puppet-bolt-package-170"><h2 class="title topictitle2" id="ariaid-title26">Select module content missing from <code class="ph codeph">puppet-bolt</code> package \(1.7.0\)</h2><div class="body"><p class="p">Previous releases of the <code class="ph codeph">puppet-bolt</code> package omitted the <code class="ph codeph">python_task_helper</code> and <code class="ph codeph">ruby_task_helper</code> modules. These are now included. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1036" target="_blank">BOLT-1036</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title27" id="wait-until-available-function-didnt-work-with-docker-transport-160"><h2 class="title topictitle2" id="ariaid-title27"><code class="ph codeph">wait_until_available</code> function didn't work with Docker transport \(1.6.0\)</h2><div class="body"><p class="p">We merged the Docker transport and <code class="ph codeph">wait_until_available</code> function in the same release, and they didn't play nicely together. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1018" target="_blank">BOLT-1018</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title28" id="python-task-helper-didnt-generate-appropriate-errors-160"><h2 class="title topictitle2" id="ariaid-title28">Python task helper didn't generate appropriate errors \(1.6.0\)</h2><div class="body"><p class="p">The Python task helper included with Bolt didn't produce an error if an exception was thrown in a task implemented with the helper. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-1021" target="_blank">BOLT-1021</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title29" id="plans-with-no-return-value-werent-marked-complete-in-pe-130"><h2 class="title topictitle2" id="ariaid-title29">Plans with no return value weren't marked complete in PE \(1.3.0\)</h2><div class="body"><p class="p">Bolt now correctly reports plan completion to PE for plans that don't return a value. Previously, a plan that didn't return a value incorrectly logged that the plan didn't complete. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-959" target="_blank">BOLT-959</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title30" id="some-functions-werent-available-in-the-boltspecplans-library-130"><h2 class="title topictitle2" id="ariaid-title30">Some functions weren't available in the BoltSpec::Plans library \(1.3.0\)</h2><div class="body"><p class="p">The BoltSpec::Plans library now supports plans that use <code class="ph codeph">without_default_logging</code> and <code class="ph codeph">wait_until_available</code>, and includes a setup helper that ensures tasks are found and that <code class="ph codeph">notice</code> works. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-971" target="_blank">BOLT-971</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title31" id="task-implementation-not-located-relative-to-other-files-in-installdir-120"><h2 class="title topictitle2" id="ariaid-title31">Task implementation not located relative to other files in installdir \(1.2.0\)</h2><div class="body"><p class="p">When you use tasks that include shared code, the task executable is located alongside shared code at <code class="ph codeph">_installdir/MODULE/tasks/TASK</code>. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-931" target="_blank">BOLT-931</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title32" id="error-when-puppet-agent-task-not-run-as-root-110"><h2 class="title topictitle2" id="ariaid-title32">Error when puppet\_agent task not run as root \(1.1.0\)</h2><div class="body"><p class="p">The puppet\_agent task now checks that it is run as root. When run as another user, it prints and fails with a helpful message. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-914" target="_blank">BOLT-878</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title33" id="bolt-suppresses-errors-from-transport-110"><h2 class="title topictitle2" id="ariaid-title33">Bolt suppresses errors from transport \(1.1.0\)</h2><div class="body"><p class="p">Previously, Bolt suppressed some exception errors thrown by transports. For example, when the ed25519 gem was not present for an Net::SSH process, the NotImplementedError for ed25519 keys would not appear. These errors are now identified and displayed. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-922" target="_blank">BOLT-922</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title34" id="loading-boltexecutor-is-breaking-gettext-setup-in-spec-tests-100"><h2 class="title topictitle2" id="ariaid-title34">Loading bolt/executor is "breaking" gettext setup in spec tests \(1.0.0\)</h2><div class="body"><p class="p">When Bolt is used as a library, it no longer loads code from r10k unless you explicitly <code class="ph codeph">require 'bolt/cli'</code>.\(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-914" target="_blank">BOLT-914</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title35" id="deprecated-functions-in-stdlib-result-in-evaluation-error-100"><h2 class="title topictitle2" id="ariaid-title35">Deprecated functions in stdlib result in Evaluation Error \(1.0.0\)</h2><div class="body"><p class="p">Manifest blocks will now allow use of deprecated functions from stdlib, and language features governed by the 'strict' setting in Puppet. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-900" target="_blank">BOLT-900</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title36" id="bolt-apply-does-not-provide-clientcert-fact-100"><h2 class="title topictitle2" id="ariaid-title36">Bolt apply does not provide clientcert fact \(1.0.0\)</h2><div class="body"><p class="p"><code class="ph codeph">apply_prep</code> has been updated to collect agent facts as listed in&nbsp;<a class="xref" href="https://puppet.com/docs/puppet/latest/lang_facts_and_builtin_vars.html#puppet-agent-facts" target="_blank">Puppet agent facts</a>. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-898" target="_blank">BOLT-898</a>\)</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title37" id="cprogram-filespuppet-labsboltbinboltbat-is-non-functional-100"><h2 class="title topictitle2" id="ariaid-title37">C:\\Program Files\\Puppet Labs\\Bolt\\bin\\bolt.bat is non-functional \(1.0.0\)</h2><div class="body"><p class="p">When moving to Ruby 2.5, the .bat scripts in Bolt packaging reverted to hard-coded paths that were not accurate. As a result Bolt would be unusable outside of PowerShell. The .bat scripts have been fixed so they work from cmd.exe as well. \(<a class="xref" href="https://tickets.puppetlabs.com/browse/BOLT-886" target="_blank">BOLT-886</a>\)</p><p class="p"><strong class="ph b">Parent topic:</strong><a class="xref" href="bolt_release_notes.html">Bolt release notes</a></p></div></article></article></main></body></html>