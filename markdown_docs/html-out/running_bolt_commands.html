<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.type" content="topic"><meta name="DC.creator" content="Jean Bond <jean@puppet.com\&gt;"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="running-basic-bolt-commands"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Running basic Bolt commands</title></head><body id="running-basic-bolt-commands"><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Running basic Bolt commands</h1><div class="body"><p class="p">Use Bolt commands to connect directly to the systems where you want to execute commands, run scripts, and upload files.</p><p class="p"><strong class="ph b">Parent topic:</strong><a class="xref" href="running_bolt.html">Using Bolt commands</a></p></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="run-a-command-on-remote-nodes"><h2 class="title topictitle2" id="ariaid-title2">Run a command on remote nodes</h2><div class="body"><p class="p">Specify the command you want to run and which nodes to run it on.</p><p class="p">When you have credentials on remote systems, you can use Bolt to run commands across those systems.</p><ul class="ul"><li class="li"><p class="p">To run a command on a list of nodes:</p></li></ul><pre class="pre codeblock"><code>bolt command run &lt;COMMAND&gt; --nodes &lt;NODE NAME&gt;,&lt;NODE NAME&gt;,&lt;NODE NAME&gt;</code></pre><ul class="ul"><li class="li"><p class="p">To run a command on WinRM nodes, indicate the WinRM protocol in the nodes string:</p></li></ul><pre class="pre codeblock"><code>bolt command run &lt;COMMAND&gt; --nodes winrm://&lt;WINDOWS.NODE&gt; --user &lt;USERNAME&gt; --password &lt;PASSWORD&gt;</code></pre><ul class="ul"><li class="li"><p class="p">To run a command that contains spaces or shell special characters, wrap the command in single quotation marks:</p></li></ul><pre class="pre codeblock"><code>bolt command run 'echo $HOME' --nodes web5.mydomain.edu,web6.mydomain.edu</code></pre><pre class="pre codeblock"><code>bolt command run "netstat -an | grep 'tcp.*LISTEN'" --nodes web5.mydomain.edu,web6.mydomain.edu</code></pre><ul class="ul"><li class="li"><p class="p">To run a cross-platform command:</p><pre class="pre codeblock"><code>bolt command run "echo 'hello world'"</code></pre><p class="p"><strong class="ph b">Note:</strong> When connecting to Bolt hosts over WinRM that have not configured SSL for port 5986, passing the <code class="ph codeph">--no-ssl</code> switch is required to connect to the default WinRM port 5985.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="running-commands-with-redirection-or-pipes"><h2 class="title topictitle2" id="ariaid-title3">Running commands with redirection or pipes</h2><div class="body"><p class="p">When you run one-line commands that include redirection or pipes, pass <code class="ph codeph">bash</code> or another shell as the command.</p><p class="p">Using a shell ensures that the one-liner is run as a single command and that it works correctly with <code class="ph codeph">run-as</code>. For example, instead of <code class="ph codeph">bolt command run "echo foo &gt; /root/foo" --run-as root</code>, use <code class="ph codeph">bolt command run "bash -c 'echo foo &gt; /root/foo'" --run-as root</code>.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title4" id="run-a-script-on-remote-nodes"><h2 class="title topictitle2" id="ariaid-title4">Run a script on remote nodes</h2><div class="body"><p class="p">Specify the script you want to run and which nodes to run it on.</p><p class="p">Use the <code class="ph codeph">bolt script run</code> command to run existing scripts that you use or to combine the commands that you regularly run as part of sequence. When you run a script with Bolt, the script is transferred into a temporary directory on the remote system, run on that system, and then deleted.</p><p class="p">You can run scripts in any language as long as the appropriate interpreter is installed on the remote system. This includes Bash, PowerShell, or Python.</p><ul class="ul"><li class="li"><p class="p">To run a script, specify the path to the script, and which nodes to run it on:</p></li></ul><pre class="pre codeblock"><code>bolt script run &lt;PATH/TO/SCRIPT&gt; --nodes &lt;NODE NAME&gt;,&lt;NODE NAME&gt;,&lt;NODE NAME&gt;</code></pre><pre class="pre codeblock"><code>bolt script run ../myscript.sh --nodes web5.mydomain.edu,web6.mydomain.edu</code></pre><ul class="ul"><li class="li"><p class="p">When executing on WinRM nodes, include the WinRM protocol in the nodes string:</p></li></ul><pre class="pre codeblock"><code>bolt script run &lt;PATH/TO/SCRIPT&gt; --nodes winrm://&lt;NODE NAME&gt; --user &lt;USERNAME&gt; --password &lt;PASSWORD&gt;</code></pre><ul class="ul"><li class="li"><p class="p">To pass arguments to a script, specify them after the command. If an argument contain spaces or special characters, you must quote it:</p><pre class="pre codeblock"><code>bolt script run myscript.sh 'echo hello'</code></pre><p class="p">Argument values are passed literally and are not interpolated by the shell on the remote host. If you run <code class="ph codeph">bolt script run myscript.sh 'echo $HOME'</code>, then the script receives the argument <code class="ph codeph">'echo $HOME'</code>, rather than any interpolated value.</p></li></ul></div><article class="topic nested2" aria-labelledby="ariaid-title5" id="requirements-for-scripts-run-on-remote-nix-systems"><h3 class="title topictitle3" id="ariaid-title5">Requirements for scripts run on remote \*nix systems</h3><div class="body"><p class="p">A script must include a shebang \(<code class="ph codeph">#!</code>\) line specifying the interpreter. For example, for a script written in Bash, provide the path to the Bash interpreter:</p><pre class="pre codeblock"><code>#!/bin/bash
echo hello</code></pre></div></article><article class="topic nested2" aria-labelledby="ariaid-title6" id="requirements-for-scripts-run-on-remote-windows-systems"><h3 class="title topictitle3" id="ariaid-title6">Requirements for scripts run on remote Windows systems</h3><div class="body"><p class="p">Bolt supports the extensions <code class="ph codeph">.ps1</code>, <code class="ph codeph">.rb</code>, and <code class="ph codeph">.pp</code>. To enable other file extensions, add them to your Bolt configuration file, as follows:</p><pre class="pre codeblock"><code>winrm:
   extensions: [.py, .pl]</code></pre></div></article></article><article class="topic nested1" aria-labelledby="ariaid-title7" id="upload-files-or-directories-to-remote-nodes"><h2 class="title topictitle2" id="ariaid-title7">Upload files or directories to remote nodes</h2><div class="body"><p class="p">Use Bolt to copy files or directories to remote nodes.</p><p class="p"><strong class="ph b">Note:</strong> Most transports are not optimized for file copying, so this command is best limited to small files.</p><ul class="ul"><li class="li"><p class="p">To upload a file or directory to a remote node, run the <code class="ph codeph">bolt file upload</code> command. Specify the local path to the file or directory, the destination location, and the target nodes.</p></li></ul><pre class="pre codeblock"><code>bolt file upload &lt;SOURCE&gt; &lt;DESTINATION&gt; --nodes &lt;NODE NAME&gt;,&lt;NODE NAME&gt;</code></pre><pre class="pre codeblock"><code>bolt file upload my_file.txt /tmp/remote_file.txt --nodes web5.mydomain.edu,web6.mydomain.edu</code></pre></div></article></article></main></body></html>