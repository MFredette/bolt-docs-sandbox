<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.type" content="topic"><meta name="DC.creator" content="Michelle Fredette <michelle.fredette@puppet.com\&gt;"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="bolt-configuration-options"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Bolt configuration options</title></head><body id="bolt-configuration-options"><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Bolt configuration options</h1><div class="body"><p class="p">Your Bolt configuration file can contain global and transport options.</p></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="sample-bolt-configuration-file"><h2 class="title topictitle2" id="ariaid-title2">Sample Bolt configuration file</h2><div class="body"><pre class="pre codeblock"><code>modulepath: "~/.puppetlabs/bolt-code/modules:~/.puppetlabs/bolt-code/site-modules"
inventoryfile: "~/.puppetlabs/bolt/inventory.yaml"
concurrency: 10
format: human
ssh:
  host-key-check: false
  private-key: ~/.ssh/bolt_id
  user: foo 
  interpreters:
     rb: /home/foo/.rbenv/versions/2.5.1/bin/ruby</code></pre></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="global-configuration-options"><h2 class="title topictitle2" id="ariaid-title3">Global configuration options</h2><div class="body"><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">color</code>: Whether to use colored output when printing messages to the console.</p></li><li class="li"><p class="p"><code class="ph codeph">concurrency</code>: The number of threads to use when executing on remote nodes. Default is <code class="ph codeph">100</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">format</code>: The format to use when printing results. Options are&nbsp;<code class="ph codeph">human</code>&nbsp;and&nbsp;<code class="ph codeph">json</code>. Default&nbsp;is <code class="ph codeph">human</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">hiera-config</code>: Specify the path to your Hiera config. The default path is <code class="ph codeph">hiera.yaml</code> inside the <a class="xref" href="bolt_project_directories.html#">Bolt&nbsp;project directory</a>.</p></li><li class="li"><p class="p"><code class="ph codeph">interpreters</code>: A map of an extension name to the absolute path of an executable, enabling you to override the shebang defined in a task executable. The extension can optionally be specified with the <code class="ph codeph">.</code> character \(<code class="ph codeph">.py</code> and <code class="ph codeph">py</code> both map to a task executable <code class="ph codeph">task.py</code>\) and the extension is case sensitive. The transports that support interpreter configuration are <code class="ph codeph">docker</code>, <code class="ph codeph">local</code>, <code class="ph codeph">ssh</code>, and <code class="ph codeph">winrm</code>. When a node's name is <code class="ph codeph">localhost</code>, Ruby tasks run with the Bolt Ruby interpreter by default. This example demonstrates configuring Python tasks to run with a <code class="ph codeph">python3</code> interpreter: :</p></li></ul><pre class="pre codeblock"><code>interpreters:
  py: /usr/bin/python3</code></pre><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">inventoryfile</code>: The path to a structured data inventory file used to refer to groups of nodes on the command line and from plans. The default path for the inventory file is&nbsp;<code class="ph codeph">inventory.yaml</code>&nbsp;inside the <a class="xref" href="bolt_project_directories.html#">Bolt&nbsp;project directory</a>.</p></li><li class="li"><p class="p"><code class="ph codeph">modulepath</code>: The module path for loading tasks and plan code. This is either an array of directories or a string containing a list of directories separated by the OS-specific <code class="ph codeph">PATH</code> separator. The default path for modules is&nbsp;<code class="ph codeph">modules:site-modules:site</code>&nbsp;inside the <a class="xref" href="bolt_project_directories.html#">Bolt&nbsp;project directory</a>.</p></li><li class="li"><p class="p"><code class="ph codeph">puppetfile</code>: A map containing options for the <code class="ph codeph">bolt puppetfile install</code> command.</p></li><li class="li"><p class="p"><code class="ph codeph">save-rerun</code>: Specify whether to update <code class="ph codeph">.rerun.json</code> in the <a class="xref" href="bolt_project_directories.html#">Bolt&nbsp;project directory</a>. If your target names include passwords, set this value to false to avoid writing passwords to disk.</p></li><li class="li"><p class="p"><code class="ph codeph">transport</code>: Specify the default transport to use when the transport for a target is not specified in the URL or inventory. The valid options for transport are <code class="ph codeph">docker</code>, <code class="ph codeph">local</code>, <code class="ph codeph">pcp</code>, <code class="ph codeph">ssh</code>, and <code class="ph codeph">winrm</code>.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title4" id="ssh-transport-configuration-options"><h2 class="title topictitle2" id="ariaid-title4">SSH transport configuration options</h2><div class="body"><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">connect-timeout</code>: How long Bolt should wait when establishing connections.</p></li><li class="li"><p class="p"><code class="ph codeph">host-key-check</code>: Whether to perform host key validation when connecting over SSH. Default is <code class="ph codeph">true</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">password</code>: Login password.</p></li><li class="li"><p class="p"><code class="ph codeph">port</code>: Connection port. Default is&nbsp;<code class="ph codeph">22</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">private-key</code>: The path to the private key file to use for SSH authentication.</p></li><li class="li"><p class="p"><code class="ph codeph">proxyjump</code>: A jump host to proxy SSH connections through, and an optional user to connect with, for example: jump.example.com or <a class="xref" href="mailto:user1@jump.example.com" target="_blank">user1@jump.example.com</a>.</p></li><li class="li"><p class="p"><code class="ph codeph">run-as</code>: A different user to run commands as after login.</p></li><li class="li"><p class="p"><code class="ph codeph">run-as-command</code>: The command to elevate permissions. Bolt appends the user and command strings to the configured run as a command before running it on the target. This command must not require an interactive password prompt, and the <code class="ph codeph">sudo-password</code> option is ignored when <code class="ph codeph">run-as-command</code> is specified. The run-as command must be specified as an array.</p></li><li class="li"><p class="p"><code class="ph codeph">sudo-password</code>: Password to use when changing users via&nbsp;<code class="ph codeph">run-as</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">tmpdir</code>: The directory to upload and execute temporary files on the target.</p></li><li class="li"><p class="p"><code class="ph codeph">user</code>: Login user. Default is&nbsp;<code class="ph codeph">root</code>.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title5" id="openssh-configuration-options"><h2 class="title topictitle2" id="ariaid-title5">OpenSSH configuration options</h2><div class="body"><p class="p">In addition to the SSH transport options defined in Bolt configuration files, some additional SSH options are read from OpenSSH configuration files, including <code class="ph codeph">~/.ssh/config</code>, <code class="ph codeph">/etc/ssh_config</code>, and <code class="ph codeph">/etc/ssh/ssh_config</code>. Not all OpenSSH configuration values have equivalents in Bolt.</p><p class="p">These are the options configurable in OpenSSH files:</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">User</code></p></li><li class="li"><p class="p"><code class="ph codeph">Port</code></p></li><li class="li"><p class="p"><code class="ph codeph">UserKnownHostsFile</code></p></li><li class="li"><p class="p"><code class="ph codeph">Ciphers</code>: Ciphers allowed in order of preference. Multiple ciphers must be comma-separated.</p></li><li class="li"><p class="p"><code class="ph codeph">Compression</code>: Whether to use compression.</p></li><li class="li"><p class="p"><code class="ph codeph">CompressionLevel</code>: Compression level to use if compression is enabled.</p></li><li class="li"><p class="p"><code class="ph codeph">GlobalKnownHostsFile</code>: Path to global host key database.</p></li><li class="li"><p class="p"><code class="ph codeph">HostKeyAlgorithms</code>: Host key algorithms that the client wants to use in order of preference.</p></li><li class="li"><p class="p"><code class="ph codeph">HostKeyAlias</code>: Use alias instead of real hostname when looking up or saving the host key in the host key database file.</p></li><li class="li"><p class="p"><code class="ph codeph">IdentitiesOnly</code>: Use only identity key in SSH config even if ssh-agent offers others.</p></li><li class="li"><p class="p"><code class="ph codeph">HostName</code>: Host name to log.</p></li><li class="li"><p class="p"><code class="ph codeph">IdentityFile</code>: File in which user's identity key is stored.</p></li><li class="li"><p class="p"><code class="ph codeph">Port</code>: SSH port.</p></li><li class="li"><p class="p"><code class="ph codeph">UserKnownHostsFile</code>: Path to local user's host key database.</p></li></ul><p class="p"><strong class="ph b">Note:</strong> For OpenSSH configuration options with direct equivalents in Bolt, such as user and port, the settings in Bolt config take precedence.</p><p class="p">To illustrate, consider this example:</p><p class="p"><code class="ph codeph">inventory.yaml</code></p><pre class="pre codeblock"><code>nodes:
  - name: host1.example.net
    config:
      transport: ssh
      ssh:
        host-key-check: true
        port: 22
        private-key: /.ssh/id_rsa-example</code></pre><p class="p"><code class="ph codeph">ssh.config</code></p><pre class="pre codeblock"><code>Host *.example.net
  UserKnownHostsFile=~/.ssh/known_hosts
  User root
  Port 444</code></pre><p class="p">In this example, the SSH connection is configured to use the user and known hosts file defined in OpenSSH config and the port defined inBolt config.</p><p class="p"><strong class="ph b">Note:</strong> The <code class="ph codeph">host-key-check</code> option must be set in Bolt config because the <code class="ph codeph">StrictHostKeyChecking</code> OpenSSH configuration value is ignored.</p><p class="p">When using the SSH transport, Bolt also interacts with the ssh-agent for SSH key management. The most common interaction is to handle password protected private keys. When a private key is password protected it must be added to the ssh-agent in order to be used to authenticate Bolt SSH connections.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title6" id="winrm-transport-configuration-options"><h2 class="title topictitle2" id="ariaid-title6">WinRM transport configuration options</h2><div class="body"><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">cacert</code>: The path to the CA certificate.</p></li><li class="li"><p class="p"><code class="ph codeph">connect-timeout</code>: How long Bolt should wait when establishing connections.</p></li><li class="li"><p class="p"><code class="ph codeph">extensions</code>: List of file extensions that are accepted for scripts or tasks. Scripts with these file extensions rely on the target node's file type association to run. For example, if Python is installed on the system, a <code class="ph codeph">.py</code> script should run with <code class="ph codeph">python.exe</code>. The extensions .<code class="ph codeph">ps1</code>, <code class="ph codeph">.rb</code>, and <code class="ph codeph">.pp</code> are always allowed and run via hard-coded executables.</p></li><li class="li"><p class="p"><code class="ph codeph">file-protocol</code>: Which file transfer protocol to use. Either <code class="ph codeph">winrm</code> or <code class="ph codeph">smb</code>. Using <code class="ph codeph">smb</code> is recommended for large file transfers. Default is <code class="ph codeph">winrm</code>.</p></li></ul><p class="p"><strong class="ph b">Note:</strong> The SMB file protocol is experimental and is currently unsupported in conjunction with SSL, given that only SMB2 is currently implented.</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">password</code>: Login password. Required.</p></li><li class="li"><p class="p"><code class="ph codeph">port</code>: Connection port. Default is&nbsp;<code class="ph codeph">5986</code>, or <code class="ph codeph">5985</code> if&nbsp;<code class="ph codeph">ssl: false</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">smb-port</code>: With <code class="ph codeph">file-protocol</code> set to <code class="ph codeph">smb</code>, this is the port to establish a connection on. Default is <code class="ph codeph">445</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">ssl</code>: When <code class="ph codeph">true</code>, Bolt uses secure https connections for WinRM. Default is <code class="ph codeph">true</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">ssl-verify</code>: When true, verifies the targets certificate matches the&nbsp;<code class="ph codeph">cacert</code>. Default is <code class="ph codeph">true</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">tmpdir</code>: The directory to upload and execute temporary files on the target.</p></li><li class="li"><p class="p"><code class="ph codeph">user</code>: Login user. Required.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title7" id="pcp-transport-configuration-options"><h2 class="title topictitle2" id="ariaid-title7">PCP transport configuration options</h2><div class="body"><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">cacert</code>: The path to the CA certificate.</p></li><li class="li"><p class="p"><code class="ph codeph">service-url</code>: The URL of the orchestrator API.</p></li><li class="li"><p class="p"><code class="ph codeph">task-environment</code>: The environment orchestrator should load task code from.</p></li><li class="li"><p class="p"><code class="ph codeph">token-file</code>: The path to the token file.</p><p class="p"><code class="ph codeph">job-poll-interval</code>: Set interval to poll orchestrator for job status.</p><p class="p"><code class="ph codeph">job-poll-timeout</code>: Set time to wait for orchestrator job status.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title8" id="local-transport-configuration-options"><h2 class="title topictitle2" id="ariaid-title8">Local transport configuration options</h2><div class="body"><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">run-as</code>: A different user to run commands as after login.</p></li><li class="li"><p class="p"><code class="ph codeph">run-as-command</code>: The command to elevate permissions. Bolt appends the user and command strings to the configured run as a command before running it on the target. This command must not require an interactive password prompt, and the <code class="ph codeph">sudo-password</code> option is ignored when <code class="ph codeph">run-as-command</code> is specified. The run-as command must be specified as an array.</p></li><li class="li"><p class="p"><code class="ph codeph">sudo-password</code>: Password to use when changing users via&nbsp;<code class="ph codeph">run-as</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">tmpdir</code>: The directory to copy and execute temporary files.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title9" id="docker-transport-configuration-options"><h2 class="title topictitle2" id="ariaid-title9">Docker transport configuration options</h2><div class="body"><p class="p"><strong class="ph b">Note:</strong> The Docker transport is experimental because the capabilities and role of the Docker API might change.</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">service-options</code>: A hash of options to configure the Docker connection. This option is necessary only if you're using a non-default URL. See <a class="xref" href="https://github.com/swipely/docker-api" target="_blank">https://github.com/swipely/docker-ap</a>i for supported options.</p></li><li class="li"><p class="p"><code class="ph codeph">service-url</code>: URL of the Docker host used for API requests. Defaults to local via a Unix socket at <code class="ph codeph">unix:///var/docker.sock</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">shell-command</code>: A shell command any Docker exec commands should be wrapped in, for example, <code class="ph codeph">bash -lc</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">tmpdir</code>: The directory to upload and execute temporary files on the target.</p></li><li class="li"><p class="p"><code class="ph codeph">tty</code>: When <code class="ph codeph">true</code>, enable tty on Docker exec commands. Default is <code class="ph codeph">false</code>.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title10" id="remote-transport-configuration-options"><h2 class="title topictitle2" id="ariaid-title10">Remote transport configuration options</h2><div class="body"><p class="p"><strong class="ph b">Note:</strong> The remote transport is experimental. Its configuration options and behavior might change between Y releases.</p><p class="p">The remote transport can accept arbitrary options depending on the underlying remote target, for example <code class="ph codeph">api-token</code>.</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">run-on</code>: The proxy target that the task should execute on. Default is <code class="ph codeph">localhost</code>.</p></li></ul></div></article><article class="topic nested1" aria-labelledby="ariaid-title11" id="log-file-configuration-options"><h2 class="title topictitle2" id="ariaid-title11">Log file configuration options</h2><div class="body"><p class="p">Capture the results of your plan runs in a log file.</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">log</code>: the configuration of the log file output. This option includes the following properties:</p></li><li class="li"><p class="p"><code class="ph codeph">append</code> add output to an existing log file. Available for only for logs output to a filepath. Your options are <code class="ph codeph">true</code> \(default\) and <code class="ph codeph">false</code>.</p></li><li class="li"><p class="p"><code class="ph codeph">console</code> or <code class="ph codeph">path/to.log</code>: the location of the log output.</p></li><li class="li"><p class="p"><code class="ph codeph">level</code>: the type of information in the log. Your options are <code class="ph codeph">debug</code>, <code class="ph codeph">info</code>, <code class="ph codeph">notice</code>, <code class="ph codeph">warn</code>, and <code class="ph codeph">error</code>.</p></li></ul><pre class="pre codeblock"><code>log:
  console:
    level: info
  ~/.bolt/debug.log:
    level: debug
    append: false
</code></pre></div></article><article class="topic nested1" aria-labelledby="ariaid-title12" id="puppetfile-configuration-options"><h2 class="title topictitle2" id="ariaid-title12">Puppetfile configuration options</h2><div class="body"><p class="p">The <code class="ph codeph">puppetfile</code> section configures how modules are retrieved when running <code class="ph codeph">bolt puppetfile install</code>.</p><ul class="ul"><li class="li"><p class="p"><code class="ph codeph">proxy</code>: The HTTP proxy to use for Git and Forge operations.</p></li><li class="li"><p class="p"><code class="ph codeph">forge</code>: A subsection that can have its own <code class="ph codeph">proxy</code> setting to set an HTTP proxy for Forge operations only, and a <code class="ph codeph">baseurl</code> setting to specify a different Forge host.</p></li></ul><p class="p"><strong class="ph b">Parent topic:</strong><a class="xref" href="configuring_bolt.html">Configuring Bolt</a></p></div></article></article></main></body></html>