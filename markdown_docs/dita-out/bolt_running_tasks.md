<?xml version="1.0" encoding="UTF-8"?><?path2rootmap-uri ./?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="running-tasks"><title>Running tasks</title><prolog><author>Jean Bond &lt;jean@puppet.com\&gt;</author></prolog><body><p>Bolt can run Puppet tasks on remote nodes without requiring any Puppet infrastructure.Â </p><p>To execute a task, run <codeph>bolt task run</codeph>, specifying:</p><ul><li><p>The full name of the task, formatted as <codeph>&lt;MODULE::TASK&gt;</codeph>, or as <codeph>&lt;MODULE&gt;</codeph> for a module's main task \(the <codeph>init</codeph> task\).</p></li><li><p>Any task parameters, as <codeph>parameter=value</codeph>.</p></li><li><p>The nodes on which to run the task and the connection protocol, with the <codeph>--nodes</codeph> flag.</p></li><li><p>If credentials are required to connect to the target node, the username and password, with the <codeph>--user</codeph> and <codeph>--password</codeph> flags.</p></li></ul><p>For example, to run the <codeph>sql</codeph> task from the <codeph>mysql</codeph> module on node named neptune:</p><codeblock xml:space="preserve">bolt task run mysql::sql database=mydatabase sql="SHOW TABLES" --nodes neptune --modulepath ~/modules</codeblock><p>To run the main module task defined in <codeph>init</codeph>, refer to the task by the module name only. For example, the <codeph>puppetlabs-package</codeph> module contains only one task, defined as <codeph>init</codeph>, but this task can execute several actions. To run the <codeph>status</codeph> action from this module to check whether the vim package is installed, you run:</p><codeblock xml:space="preserve">bolt task run package action=status name=vim --nodes neptune --modulepath ~/modules</codeblock><p><b>Tip:</b> Bolt is packaged with a collection of modules that contain useful plans to support common workflows. For details, see <xref href="packaged_modules.md" format="dita">Packaged modules</xref>.</p><p><b>Parent topic:</b><xref href="writing_tasks_and_plans.md" format="dita" type="topic">Tasks and plans</xref></p></body><topic id="passing-structured-data"><title>Passing structured data</title><body><p>If one of your task or plan parameters accept structured data like an <codeph>array</codeph> or <codeph>hash</codeph>, it can be passed as JSON from the command line.</p><p>If a single parameter can be parsed as JSON and the parsed value matches the parameter's type specification in the task metadata or plan definition, it can be passed with <codeph>&lt;&gt;param=value</codeph> syntax. Make sure to wrap the JSON value in single quotes to prevent <codeph>"</codeph> characters from being swallowed by the shell.</p><codeblock xml:space="preserve">bolt task run mymodule::mytask --nodes app1.myorg.com load_balancers='["lb1.myorg.com", "lb2.myorg.com"]'</codeblock><codeblock xml:space="preserve">bolt plan run mymodule::myplan load_balancers='["lb1.myorg.com", "lb2.myorg.com"]'</codeblock><p>If you want to pass multiple structured values or are having trouble with the magic parsing of single parameters, you can pass a single JSON object for all parameters with the <codeph>--params</codeph> flag.</p><codeblock xml:space="preserve">bolt task run mymodule::mytask --nodes app1.myorg.com --params '{"load_balancers": ["lb1.myorg.com", "lb2.myorg.com"]}'</codeblock><codeblock xml:space="preserve">bolt plan run mymodule::myplan --params '{"load_balancers": ["lb1.myorg.com", "lb2.myorg.com"]}'</codeblock><p>You can also load parameters from a file by putting <codeph>@</codeph> before the file name.</p><codeblock xml:space="preserve" outputclass="no-highlight">bolt task run mymodule::mytask --nodes app1.myorg.com --params @param_file.json</codeblock><codeblock xml:space="preserve" outputclass="no-highlight">bolt plan run mymodule::myplan --params @param_file.json</codeblock><p>To pass JSON values in PowerShell without worrying about escaping, use <codeph>ConvertTo-Json</codeph></p><codeblock xml:space="preserve">bolt task run mymodule::mytask --nodes app1.myorg.com --params $(@{load_balancers=@("lb1.myorg.com","lb2.myorg.com")} | ConvertTo-Json)</codeblock><codeblock xml:space="preserve">bolt plan run mymodule::myplan --nodes app1.myorg.com --params $(@{load_balancers=@("lb1.myorg.com","lb2.myorg.com")} | ConvertTo-Json)</codeblock></body></topic><topic id="specifying-the-module-path"><title>Specifying the module path</title><body><p>In order for Bolt to find a task or plan, the task or plan must be in a module on the <codeph>modulepath</codeph>. By default, the <codeph>modulepath</codeph> includes <codeph>modules/</codeph> and <codeph>site-modules/</codeph> directories inside the Bolt project directory.</p><p>If you are developing a new plan, you can specify <codeph>--modulepath &lt;PARENT_DIR_OF/MODULE&gt;</codeph> to tell Bolt where to load the module. For example, if your module is in <codeph>~/src/modules/my_module/</codeph>, run Bolt with <codeph>--modulepath ~/src/module</codeph>. If you often use the same <codeph>modulepath</codeph>, you can set <codeph>modulepath</codeph> in <codeph>bolt.yaml</codeph>.</p></body></topic></topic>