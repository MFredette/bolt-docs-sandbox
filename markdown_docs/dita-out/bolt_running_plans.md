<?xml version="1.0" encoding="UTF-8"?><?path2rootmap-uri ./?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="running-plans"><title>Running plans</title><prolog><author>Jean Bond &lt;jean@puppet.com\&gt;</author></prolog><body><p>Bolt can run plans, allowing multiple tasks to be tied together.Â </p><p>To execute a task plan, run <codeph>bolt plan run</codeph>, specifying:</p><ul><li><p>The full name of the plan, formatted as <codeph>&lt;MODULE&gt;::&lt;PLAN&gt;</codeph>.</p></li><li><p>Any plan parameters, as <codeph>parameter=value</codeph>.</p></li><li><p>If credentials are required to connect to the target node, pass the username and password with the <codeph>--user</codeph> and <codeph>--password</codeph> flags.</p></li></ul><p>For example, if a plan defined in <codeph>mymodule/plans/myplan.pp</codeph> accepts a <codeph>load_balancer</codeph> parameter to specify a load balancer node on which to run the tasks or functions in the plan, run:</p><codeblock xml:space="preserve">bolt plan run mymodule::myplan load_balancer=lb.myorg.com
</codeblock><p>Note that, like <codeph>--nodes</codeph>, you can pass a comma-separated list of node names, wildcard patterns, or group names to a plan parameter that is passed to a run function or that the plan resolves using <codeph>get_targets</codeph>.</p><p><b>Tip:</b> Bolt is packaged with a collection of modules that contain useful plans to support common workflows. For details, see <xref href="packaged_modules.md" format="dita">Packaged modules</xref>.</p><p><b>Parent topic:</b><xref href="writing_tasks_and_plans.md" format="dita" type="topic">Tasks and plans</xref></p><p><b>Related information</b></p><p><xref href="writing_plans.md#" format="dita" type="topic">Example plans</xref></p></body><topic id="passing-structured-data"><title>Passing structured data</title><body><p>If one of your task or plan parameters accept structured data like an <codeph>array</codeph> or <codeph>hash</codeph>, it can be passed as JSON from the command line.</p><p>If a single parameter can be parsed as JSON and the parsed value matches the parameter's type specification in the task metadata or plan definition, it can be passed with <codeph>&lt;&gt;param=value</codeph> syntax. Make sure to wrap the JSON value in single quotes to prevent <codeph>"</codeph> characters from being swallowed by the shell.</p><codeblock xml:space="preserve">bolt task run mymodule::mytask --nodes app1.myorg.com load_balancers='["lb1.myorg.com", "lb2.myorg.com"]'</codeblock><codeblock xml:space="preserve">bolt plan run mymodule::myplan load_balancers='["lb1.myorg.com", "lb2.myorg.com"]'</codeblock><p>If you want to pass multiple structured values or are having trouble with the magic parsing of single parameters, you can pass a single JSON object for all parameters with the <codeph>--params</codeph> flag.</p><codeblock xml:space="preserve">bolt task run mymodule::mytask --nodes app1.myorg.com --params '{"load_balancers": ["lb1.myorg.com", "lb2.myorg.com"]}'</codeblock><codeblock xml:space="preserve">bolt plan run mymodule::myplan --params '{"load_balancers": ["lb1.myorg.com", "lb2.myorg.com"]}'</codeblock><p>You can also load parameters from a file by putting <codeph>@</codeph> before the file name.</p><codeblock xml:space="preserve" outputclass="no-highlight">bolt task run mymodule::mytask --nodes app1.myorg.com --params @param_file.json</codeblock><codeblock xml:space="preserve" outputclass="no-highlight">bolt plan run mymodule::myplan --params @param_file.json</codeblock><p>To pass JSON values in PowerShell without worrying about escaping, use <codeph>ConvertTo-Json</codeph></p><codeblock xml:space="preserve">bolt task run mymodule::mytask --nodes app1.myorg.com --params $(@{load_balancers=@("lb1.myorg.com","lb2.myorg.com")} | ConvertTo-Json)</codeblock><codeblock xml:space="preserve">bolt plan run mymodule::myplan --nodes app1.myorg.com --params $(@{load_balancers=@("lb1.myorg.com","lb2.myorg.com")} | ConvertTo-Json)</codeblock></body></topic><topic id="specifying-the-module-path"><title>Specifying the module path</title><body><p>In order for Bolt to find a task or plan, the task or plan must be in a module on the <codeph>modulepath</codeph>. By default, the <codeph>modulepath</codeph> includes <codeph>modules/</codeph> and <codeph>site-modules/</codeph> directories inside the Bolt project directory.</p><p>If you are developing a new plan, you can specify <codeph>--modulepath &lt;PARENT_DIR_OF/MODULE&gt;</codeph> to tell Bolt where to load the module. For example, if your module is in <codeph>~/src/modules/my_module/</codeph>, run Bolt with <codeph>--modulepath ~/src/module</codeph>. If you often use the same <codeph>modulepath</codeph>, you can set <codeph>modulepath</codeph> in <codeph>bolt.yaml</codeph>.</p></body></topic></topic>