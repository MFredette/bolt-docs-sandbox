<?xml version="1.0" encoding="UTF-8"?><?path2rootmap-uri ./?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="bolt-configuration-options"><title>Bolt configuration options</title><prolog><author>Michelle Fredette &lt;michelle.fredette@puppet.com\&gt;</author></prolog><body><p>Your Bolt configuration file can contain global and transport options.</p></body><topic id="sample-bolt-configuration-file"><title>Sample Bolt configuration file</title><body><codeblock xml:space="preserve">modulepath: "~/.puppetlabs/bolt-code/modules:~/.puppetlabs/bolt-code/site-modules"
inventoryfile: "~/.puppetlabs/bolt/inventory.yaml"
concurrency: 10
format: human
ssh:
  host-key-check: false
  private-key: ~/.ssh/bolt_id
  user: foo 
  interpreters:
     rb: /home/foo/.rbenv/versions/2.5.1/bin/ruby</codeblock></body></topic><topic id="global-configuration-options"><title>Global configuration options</title><body><ul><li><p><codeph>color</codeph>: Whether to use colored output when printing messages to the console.</p></li><li><p><codeph>concurrency</codeph>: The number of threads to use when executing on remote nodes. Default is <codeph>100</codeph>.</p></li><li><p><codeph>format</codeph>: The format to use when printing results. Options are <codeph>human</codeph> and <codeph>json</codeph>. Default is <codeph>human</codeph>.</p></li><li><p><codeph>hiera-config</codeph>: Specify the path to your Hiera config. The default path is <codeph>hiera.yaml</codeph> inside the <xref href="bolt_project_directories.md#" format="dita" type="topic">Bolt project directory</xref>.</p></li><li><p><codeph>interpreters</codeph>: A map of an extension name to the absolute path of an executable, enabling you to override the shebang defined in a task executable. The extension can optionally be specified with the <codeph>.</codeph> character \(<codeph>.py</codeph> and <codeph>py</codeph> both map to a task executable <codeph>task.py</codeph>\) and the extension is case sensitive. The transports that support interpreter configuration are <codeph>docker</codeph>, <codeph>local</codeph>, <codeph>ssh</codeph>, and <codeph>winrm</codeph>. When a node's name is <codeph>localhost</codeph>, Ruby tasks run with the Bolt Ruby interpreter by default. This example demonstrates configuring Python tasks to run with a <codeph>python3</codeph> interpreter: :</p></li></ul><codeblock xml:space="preserve">interpreters:
  py: /usr/bin/python3</codeblock><ul><li><p><codeph>inventoryfile</codeph>: The path to a structured data inventory file used to refer to groups of nodes on the command line and from plans. The default path for the inventory file is <codeph>inventory.yaml</codeph> inside the <xref href="bolt_project_directories.md#" format="dita" type="topic">Bolt project directory</xref>.</p></li><li><p><codeph>modulepath</codeph>: The module path for loading tasks and plan code. This is either an array of directories or a string containing a list of directories separated by the OS-specific <codeph>PATH</codeph> separator. The default path for modules is <codeph>modules:site-modules:site</codeph> inside the <xref href="bolt_project_directories.md#" format="dita" type="topic">Bolt project directory</xref>.</p></li><li><p><codeph>puppetfile</codeph>: A map containing options for the <codeph>bolt puppetfile install</codeph> command.</p></li><li><p><codeph>save-rerun</codeph>: Specify whether to update <codeph>.rerun.json</codeph> in the <xref href="bolt_project_directories.md#" format="dita" type="topic">Bolt project directory</xref>. If your target names include passwords, set this value to false to avoid writing passwords to disk.</p></li><li><p><codeph>transport</codeph>: Specify the default transport to use when the transport for a target is not specified in the URL or inventory. The valid options for transport are <codeph>docker</codeph>, <codeph>local</codeph>, <codeph>pcp</codeph>, <codeph>ssh</codeph>, and <codeph>winrm</codeph>.</p></li></ul></body></topic><topic id="ssh-transport-configuration-options"><title>SSH transport configuration options</title><body><ul><li><p><codeph>connect-timeout</codeph>: How long Bolt should wait when establishing connections.</p></li><li><p><codeph>host-key-check</codeph>: Whether to perform host key validation when connecting over SSH. Default is <codeph>true</codeph>.</p></li><li><p><codeph>password</codeph>: Login password.</p></li><li><p><codeph>port</codeph>: Connection port. Default is <codeph>22</codeph>.</p></li><li><p><codeph>private-key</codeph>: The path to the private key file to use for SSH authentication.</p></li><li><p><codeph>proxyjump</codeph>: A jump host to proxy SSH connections through, and an optional user to connect with, for example: jump.example.com or <xref href="mailto:user1@jump.example.com" format="email" scope="external">user1@jump.example.com</xref>.</p></li><li><p><codeph>run-as</codeph>: A different user to run commands as after login.</p></li><li><p><codeph>run-as-command</codeph>: The command to elevate permissions. Bolt appends the user and command strings to the configured run as a command before running it on the target. This command must not require an interactive password prompt, and the <codeph>sudo-password</codeph> option is ignored when <codeph>run-as-command</codeph> is specified. The run-as command must be specified as an array.</p></li><li><p><codeph>sudo-password</codeph>: Password to use when changing users via <codeph>run-as</codeph>.</p></li><li><p><codeph>tmpdir</codeph>: The directory to upload and execute temporary files on the target.</p></li><li><p><codeph>user</codeph>: Login user. Default is <codeph>root</codeph>.</p></li></ul></body></topic><topic id="openssh-configuration-options"><title>OpenSSH configuration options</title><body><p>In addition to the SSH transport options defined in Bolt configuration files, some additional SSH options are read from OpenSSH configuration files, including <codeph>~/.ssh/config</codeph>, <codeph>/etc/ssh_config</codeph>, and <codeph>/etc/ssh/ssh_config</codeph>. Not all OpenSSH configuration values have equivalents in Bolt.</p><p>These are the options configurable in OpenSSH files:</p><ul><li><p><codeph>User</codeph></p></li><li><p><codeph>Port</codeph></p></li><li><p><codeph>UserKnownHostsFile</codeph></p></li><li><p><codeph>Ciphers</codeph>: Ciphers allowed in order of preference. Multiple ciphers must be comma-separated.</p></li><li><p><codeph>Compression</codeph>: Whether to use compression.</p></li><li><p><codeph>CompressionLevel</codeph>: Compression level to use if compression is enabled.</p></li><li><p><codeph>GlobalKnownHostsFile</codeph>: Path to global host key database.</p></li><li><p><codeph>HostKeyAlgorithms</codeph>: Host key algorithms that the client wants to use in order of preference.</p></li><li><p><codeph>HostKeyAlias</codeph>: Use alias instead of real hostname when looking up or saving the host key in the host key database file.</p></li><li><p><codeph>IdentitiesOnly</codeph>: Use only identity key in SSH config even if ssh-agent offers others.</p></li><li><p><codeph>HostName</codeph>: Host name to log.</p></li><li><p><codeph>IdentityFile</codeph>: File in which user's identity key is stored.</p></li><li><p><codeph>Port</codeph>: SSH port.</p></li><li><p><codeph>UserKnownHostsFile</codeph>: Path to local user's host key database.</p></li></ul><p><b>Note:</b> For OpenSSH configuration options with direct equivalents in Bolt, such as user and port, the settings in Bolt config take precedence.</p><p>To illustrate, consider this example:</p><p><codeph>inventory.yaml</codeph></p><codeblock xml:space="preserve">nodes:
  - name: host1.example.net
    config:
      transport: ssh
      ssh:
        host-key-check: true
        port: 22
        private-key: /.ssh/id_rsa-example</codeblock><p><codeph>ssh.config</codeph></p><codeblock xml:space="preserve">Host *.example.net
  UserKnownHostsFile=~/.ssh/known_hosts
  User root
  Port 444</codeblock><p>In this example, the SSH connection is configured to use the user and known hosts file defined in OpenSSH config and the port defined inBolt config.</p><p><b>Note:</b> The <codeph>host-key-check</codeph> option must be set in Bolt config because the <codeph>StrictHostKeyChecking</codeph> OpenSSH configuration value is ignored.</p><p>When using the SSH transport, Bolt also interacts with the ssh-agent for SSH key management. The most common interaction is to handle password protected private keys. When a private key is password protected it must be added to the ssh-agent in order to be used to authenticate Bolt SSH connections.</p></body></topic><topic id="winrm-transport-configuration-options"><title>WinRM transport configuration options</title><body><ul><li><p><codeph>cacert</codeph>: The path to the CA certificate.</p></li><li><p><codeph>connect-timeout</codeph>: How long Bolt should wait when establishing connections.</p></li><li><p><codeph>extensions</codeph>: List of file extensions that are accepted for scripts or tasks. Scripts with these file extensions rely on the target node's file type association to run. For example, if Python is installed on the system, a <codeph>.py</codeph> script should run with <codeph>python.exe</codeph>. The extensions .<codeph>ps1</codeph>, <codeph>.rb</codeph>, and <codeph>.pp</codeph> are always allowed and run via hard-coded executables.</p></li><li><p><codeph>file-protocol</codeph>: Which file transfer protocol to use. Either <codeph>winrm</codeph> or <codeph>smb</codeph>. Using <codeph>smb</codeph> is recommended for large file transfers. Default is <codeph>winrm</codeph>.</p></li></ul><p><b>Note:</b> The SMB file protocol is experimental and is currently unsupported in conjunction with SSL, given that only SMB2 is currently implented.</p><ul><li><p><codeph>password</codeph>: Login password. Required.</p></li><li><p><codeph>port</codeph>: Connection port. Default is <codeph>5986</codeph>, or <codeph>5985</codeph> if <codeph>ssl: false</codeph>.</p></li><li><p><codeph>smb-port</codeph>: With <codeph>file-protocol</codeph> set to <codeph>smb</codeph>, this is the port to establish a connection on. Default is <codeph>445</codeph>.</p></li><li><p><codeph>ssl</codeph>: When <codeph>true</codeph>, Bolt uses secure https connections for WinRM. Default is <codeph>true</codeph>.</p></li><li><p><codeph>ssl-verify</codeph>: When true, verifies the targets certificate matches the <codeph>cacert</codeph>. Default is <codeph>true</codeph>.</p></li><li><p><codeph>tmpdir</codeph>: The directory to upload and execute temporary files on the target.</p></li><li><p><codeph>user</codeph>: Login user. Required.</p></li></ul></body></topic><topic id="pcp-transport-configuration-options"><title>PCP transport configuration options</title><body><ul><li><p><codeph>cacert</codeph>: The path to the CA certificate.</p></li><li><p><codeph>service-url</codeph>: The URL of the orchestrator API.</p></li><li><p><codeph>task-environment</codeph>: The environment orchestrator should load task code from.</p></li><li><p><codeph>token-file</codeph>: The path to the token file.</p><p><codeph>job-poll-interval</codeph>: Set interval to poll orchestrator for job status.</p><p><codeph>job-poll-timeout</codeph>: Set time to wait for orchestrator job status.</p></li></ul></body></topic><topic id="local-transport-configuration-options"><title>Local transport configuration options</title><body><ul><li><p><codeph>run-as</codeph>: A different user to run commands as after login.</p></li><li><p><codeph>run-as-command</codeph>: The command to elevate permissions. Bolt appends the user and command strings to the configured run as a command before running it on the target. This command must not require an interactive password prompt, and the <codeph>sudo-password</codeph> option is ignored when <codeph>run-as-command</codeph> is specified. The run-as command must be specified as an array.</p></li><li><p><codeph>sudo-password</codeph>: Password to use when changing users via <codeph>run-as</codeph>.</p></li><li><p><codeph>tmpdir</codeph>: The directory to copy and execute temporary files.</p></li></ul></body></topic><topic id="docker-transport-configuration-options"><title>Docker transport configuration options</title><body><p><b>Note:</b> The Docker transport is experimental because the capabilities and role of the Docker API might change.</p><ul><li><p><codeph>service-options</codeph>: A hash of options to configure the Docker connection. This option is necessary only if you're using a non-default URL. See <xref href="https://github.com/swipely/docker-api" format="html" scope="external">https://github.com/swipely/docker-ap</xref>i for supported options.</p></li><li><p><codeph>service-url</codeph>: URL of the Docker host used for API requests. Defaults to local via a Unix socket at <codeph>unix:///var/docker.sock</codeph>.</p></li><li><p><codeph>shell-command</codeph>: A shell command any Docker exec commands should be wrapped in, for example, <codeph>bash -lc</codeph>.</p></li><li><p><codeph>tmpdir</codeph>: The directory to upload and execute temporary files on the target.</p></li><li><p><codeph>tty</codeph>: When <codeph>true</codeph>, enable tty on Docker exec commands. Default is <codeph>false</codeph>.</p></li></ul></body></topic><topic id="remote-transport-configuration-options"><title>Remote transport configuration options</title><body><p><b>Note:</b> The remote transport is experimental. Its configuration options and behavior might change between Y releases.</p><p>The remote transport can accept arbitrary options depending on the underlying remote target, for example <codeph>api-token</codeph>.</p><ul><li><p><codeph>run-on</codeph>: The proxy target that the task should execute on. Default is <codeph>localhost</codeph>.</p></li></ul></body></topic><topic id="log-file-configuration-options"><title>Log file configuration options</title><body><p>Capture the results of your plan runs in a log file.</p><ul><li><p><codeph>log</codeph>: the configuration of the log file output. This option includes the following properties:</p></li><li><p><codeph>append</codeph> add output to an existing log file. Available for only for logs output to a filepath. Your options are <codeph>true</codeph> \(default\) and <codeph>false</codeph>.</p></li><li><p><codeph>console</codeph> or <codeph>path/to.log</codeph>: the location of the log output.</p></li><li><p><codeph>level</codeph>: the type of information in the log. Your options are <codeph>debug</codeph>, <codeph>info</codeph>, <codeph>notice</codeph>, <codeph>warn</codeph>, and <codeph>error</codeph>.</p></li></ul><codeblock xml:space="preserve">log:
  console:
    level: info
  ~/.bolt/debug.log:
    level: debug
    append: false
</codeblock></body></topic><topic id="puppetfile-configuration-options"><title>Puppetfile configuration options</title><body><p>The <codeph>puppetfile</codeph> section configures how modules are retrieved when running <codeph>bolt puppetfile install</codeph>.</p><ul><li><p><codeph>proxy</codeph>: The HTTP proxy to use for Git and Forge operations.</p></li><li><p><codeph>forge</codeph>: A subsection that can have its own <codeph>proxy</codeph> setting to set an HTTP proxy for Forge operations only, and a <codeph>baseurl</codeph> setting to specify a different Forge host.</p></li></ul><p><b>Parent topic:</b><xref href="configuring_bolt.md" format="dita" type="topic">Configuring Bolt</xref></p></body></topic></topic>