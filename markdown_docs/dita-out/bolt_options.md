<?xml version="1.0" encoding="UTF-8"?><?path2rootmap-uri ./?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="adding-options-to-bolt-commands"><title>Adding options to Bolt commands</title><body><p>Bolt commands can accept several command line options, some of which are required.</p><p><b>Parent topic:</b><xref href="running_bolt.md" format="dita" type="topic">Using Bolt commands</xref></p></body><topic id="specify-target-nodes"><title>Specify target nodes</title><body><p>Specify the nodes that you want Bolt to target.</p><p>For most  Bolt commands, you specify target nodes with the <codeph>--nodes</codeph> flag, for example, <codeph>--nodes mercury</codeph>. For plans, you specify nodes as a list within the task plan itself or specify them as regular parameters, like <codeph>nodes=neptune</codeph>.</p><p>When targeting systems with the <codeph>--nodes</codeph> flag, you can specify the transport either in the node URL for each host, such as <codeph>--nodes winrm://mywindowsnode.mydomain</codeph>, or set a default transport for the operation with the<codeph>--transport</codeph> option. If you do not specify a transport it will default to <codeph>ssh</codeph>.</p></body><topic id="specify-nodes-in-the-command-line"><title>Specify nodes in the command line</title><body><ul><li><p>To specify multiple nodes with the <codeph>--nodes</codeph> flag, use a comma-separated list of nodes:</p></li></ul><codeblock xml:space="preserve">--nodes neptune,saturn,mars</codeblock><ul><li><p>To generate a node list with brace expansion, specify the node list with an equals sign \(<codeph>=</codeph>\), such as <codeph>--nodes=web{1,2}</codeph>.</p><codeblock xml:space="preserve"> bolt command run --nodes={web{5,6,7},elasticsearch{1,2,3}.subdomain}.mydomain.edu  </codeblock><p>This command runs Bolt on the following hosts:</p><ul><li><p>elasticsearch1.subdomain.mydomain.edu</p></li><li><p>elasticsearch2.subdomain.mydomain.edu</p></li><li><p>elasticsearch3.subdomain.mydomain.edu</p></li><li><p>web5.mydomain.edu</p></li><li><p>web6.mydomain.edu</p></li><li><p>web7.mydomain.edu</p></li></ul></li><li><p>To pass nodes to Bolt in a file, pass the file name and relative location with the <codeph>--nodes</codeph> flag and an <codeph>@</codeph> symbol:</p><codeblock xml:space="preserve">bolt command run --nodes @nodes.txt</codeblock><p>For Windows PowerShell, add single quotation marks to define the file:</p><codeblock xml:space="preserve">bolt command run --nodes '@nodes.txt'</codeblock></li><li><p>To pass nodes on <codeph>stdin</codeph>, on the command line, use a command to generate a node list, and pipe the result to Bolt with <codeph>-</codeph> after <codeph>--nodes</codeph>:</p></li></ul><codeblock xml:space="preserve">&lt;COMMAND&gt; | bolt command run --nodes -</codeblock><codeblock xml:space="preserve">For example, if you have a node list in a text file:

```
cat nodes.txt | bolt command run --nodes -
```</codeblock><ul><li><p>To pass nodes as IP addresses, use <codeph>protocol://user:password@host:port</codeph> or inventory group name. You can use a domain name or IP address for <codeph>host</codeph>, which is required. Other parameters are optional.</p></li></ul><codeblock xml:space="preserve">bolt command run --nodes ssh://user:password@[fe80::34eb:ff1:b584:d7c0]:22,
ssh://root:password@hostname, pcp://host01, winrm://Administrator:password@hostname</codeblock></body></topic><topic id="specify-nodes-from-an-inventory-file"><title>Specify nodes from an inventory file</title><body><p>To specify nodes from an inventory file, reference nodes by node name, a glob matching names in the file, or the name of a group of nodes.</p><ul><li><p>To match all nodes in both groups listed in the inventory file example:</p></li></ul><codeblock xml:space="preserve">--nodes elastic_search,web_app</codeblock><ul><li><p>To match all the nodes that start with elasticsearch in the inventory file example:</p></li></ul><codeblock xml:space="preserve">--nodes 'elasticsearch*' </codeblock><p>This inventory file defines two top-level groups: elastic\_search and web\_app.</p><codeblock xml:space="preserve">groups:
  - name: elastic_search
    nodes:
      - elasticsearch1.subdomain.mydomain.edu
      - elasticsearch2.subdomain.mydomain.edu
      - elasticsearch3.subdomain.mydomain.edu
  - name: web_app
    nodes:
      - web5.mydomain.edu
      - web6.mydomain.edu
      - web7.mydomain.edu</codeblock><p><b>Related information</b></p><p><xref href="inventory_file.md" format="dita" type="topic">Inventory file</xref></p></body></topic></topic><topic id="set-a-default-transport"><title>Set a default transport</title><body><p>To set a default transport protocol, pass it with the command with the <codeph>--transport</codeph> option.</p><p>Available transports are:</p><ul><li><p><codeph>ssh</codeph></p></li><li><p><codeph>winrm</codeph></p></li><li><p><codeph>local</codeph></p></li><li><p><codeph>docker</codeph></p></li><li><p><codeph>pcp</codeph></p></li></ul><p>Pass the <codeph>--transport</codeph> option after the nodes list:</p><codeblock xml:space="preserve">bolt command run &lt;COMMAND&gt; --nodes win1 --transport winrm</codeblock><p>This sets the transport protocol as the default for this command. If you set this option when running a plan, it is treated as the default transport for the entire plan run. Any nodes passed with transports in their URL or transports configured in inventory do not use this default.</p><p>This is useful on Windows, so that you do not have to include the <codeph>winrm</codeph> transport for each node. To override the default transport, specify the protocol on a per-host basis:</p><codeblock xml:space="preserve">bolt command run facter --nodes win1,ssh://linux --transport winrm</codeblock><p>If <codeph>localhost</codeph> is passed to <codeph>--nodes</codeph> when invoking Bolt, the <codeph>local</codeph> transport is used automatically. To avoid this behavior, prepend the target with the desired transport, for example <codeph>ssh://localhost</codeph>.</p></body></topic><topic id="specify-connection-credentials"><title>Specify connection credentials</title><body><p>To run Bolt on target nodes that require a username and password, pass credentials as options on the command line.</p><p>Bolt connects to remote nodes with either SSH or WinRM.</p><p>You can manage SSH connections with an SSH configuration file \(<codeph>~/.ssh/config</codeph>\) on your workstation, or you can specify the username and password on the command line.</p><p>WinRM connections always require you to pass the username and password with the <codeph>bolt</codeph> command:</p><codeblock xml:space="preserve">bolt command run 'gpupdate /force' --nodes winrm://pluto --user Administrator --password &lt;PASSWORD&gt;</codeblock><p>To have Bolt securely prompt for a password, use the <codeph>--password</codeph> or <codeph>-p</codeph> flag without supplying any value. Bolt then prompts for the password, so that it does not appear in a process listing or on the console. </p></body></topic><topic id="rerunning-commands-based-on-the-last-result"><title>Rerunning commands based on the last result</title><body><p>After every execution, Bolt writes information about the result of that run to a <codeph>.rerun.json</codeph> file inside the Bolt project directory. That file can then be used to specify nodes for future commands.</p><p>To attempt to retry a failed action on target nodes, use <codeph>--rerun failure</codeph>. To continue targeting those nodes, pass <codeph>--no-save-rerun</codeph> to prevent updating the file.</p><codeblock xml:space="preserve">bolt command run false --nodes all
bolt command run whoami --rerun failure --no-save-rerun</codeblock><p>If one command is dependent on the success of a previous command, you can target the successful nodes with <codeph>--rerun success</codeph>.</p><codeblock xml:space="preserve">bolt task run package action=install name=httpd --nodes all
bolt task run server action=restart name=httpd --rerun success</codeblock><p><b>Note:</b> When a plan does not return a <codeph>ResultSet</codeph> object, Bolt can't save information for reruns and <codeph>.rerun.json</codeph> is deleted.</p><p><b>Related information</b></p><p><xref href="bolt_project_directories.md#" format="dita" type="topic">Project directories</xref></p></body></topic></topic>