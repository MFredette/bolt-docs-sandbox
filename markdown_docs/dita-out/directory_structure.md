<?xml version="1.0" encoding="UTF-8"?><?path2rootmap-uri ./?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="directory-structures-for-tasks-and-plans"><title>Directory structures for tasks and plans</title><prolog><author>Melissa Amos &lt;melissa.amos@puppet.com\&gt;</author></prolog><body><p>Puppet tasks, plans, functions, classes and types must exist inside a Puppet, module in order for Bolt to load them. Bolt loads modules by searching for module directories on the modulepath.</p><p>By default, the <codeph>modulepath</codeph> includes the <codeph>modules/</codeph> and <codeph>site-modules</codeph> directories in the <xref href="bolt_project_directories.md#" format="dita" type="topic">Bolt project directory</xref>.</p><p><b>Parent topic:</b><xref href="writing_tasks_and_plans.md" format="dita" type="topic">Tasks and plans</xref></p></body><topic id="directory-structure-of-a-module"><title>Directory structure of a module</title><body><p>A module is a sub-directory of one of the directories on the modulepath. In order for Bolt to load tasks and plans, they must exist in the <codeph>tasks/</codeph> or <codeph>plans/</codeph> directory of a module with the correct name.</p><p><b>Tip:</b> You can use the Puppet Development Kit \(PDK\) to create modules and add tasks to it.</p><p>A typical module for use with Bolt may contain these directories:</p><codeblock xml:space="preserve">├── data/
├── files/
├── hiera.yaml
├── lib/
├── manifests/
├── metadata.json
├── plans/
└── tasks/</codeblock><table><tgroup cols="2"><colspec colname="col1" colnum="1"/><colspec colname="col2" colnum="2"/><thead><row><entry colname="col1">Directory</entry><entry colname="col2">Contents</entry></row></thead><tbody><row><entry colname="col1"><codeph>data</codeph></entry><entry colname="col2">Hiera data that can be used when applying a manifest block.</entry></row><row><entry colname="col1"><codeph>files</codeph></entry><entry colname="col2">Static files that can be loaded by a plan or required as a dependency of a task. Prefer putting non-Ruby libraries used by a task here.</entry></row><row><entry colname="col1"><codeph>functions</codeph></entry><entry colname="col2">Puppet language functions that can be used from a plan.</entry></row><row><entry colname="col1"><codeph>hiera.yaml</codeph></entry><entry colname="col2">Hiera configuration for this module.</entry></row><row><entry colname="col1"><codeph>lib</codeph></entry><entry colname="col2">Typically Ruby code, such as custom Puppet functions, types, or providers.</entry></row><row><entry colname="col1"><codeph>manifests</codeph></entry><entry colname="col2">Classes and other Puppet code usable when applying a manifest block.</entry></row><row><entry colname="col1"><codeph>metadata.json</codeph></entry><entry colname="col2">Typical metadata for a module describing version, operating system compatibility, and other module dependencies.</entry></row><row><entry colname="col1"><codeph>plans</codeph></entry><entry colname="col2">Plans, which must end in the <codeph>.pp</codeph> extension.</entry></row><row><entry colname="col1"><codeph>tasks</codeph></entry><entry colname="col2">Tasks and their metadata.</entry></row></tbody></tgroup></table></body><topic id="where-to-put-module-code"><title>Where to put module code</title><body><p>Modules can either be written directly in <codeph>site-modules/</codeph> or be installed from the Puppet Forge or a code repository into <codeph>modules/</codeph>.</p></body></topic></topic><topic id="modules-for-projects"><title>Modules for projects</title><body><p>Modules developed to support a particular project can be developed directly in the <codeph>site-modules</codeph> directory of the Bolt project directory.</p><p>Create a new directory for each module inside <codeph>site-modules</codeph> that matches the modules name or use <codeph>pdk new module</codeph> to create a skeleton structure.</p></body></topic><topic id="standalone-modules"><title>Standalone modules</title><body><p>Standalone modules can be published to the Forge or saved in a shared code repository so that modules can be used from multiple projects or shared publicly.</p><p>To use a standalone module, <xref href="bolt_installing_modules.md#" format="dita" type="topic">install the module</xref> into the project directory.</p><p>To create a standalone module, run <codeph>pdk new module</codeph> outside of the project directory, develop the module, then push it to a code repository or the Forge before using it in your project.</p><p>Follow these tips for managing standalone modules:</p><ul><li><p>Add <codeph>modules/*</codeph> to <codeph>.gitignore</codeph> of your project to prevent accidentally committing standalone modules.</p></li><li><p>When you run tasks and plans within a project directory, the modulepath \(<codeph>modules/</codeph> and <codeph>site-modules/</codeph>\) is searched for modules containing Bolt content. If a module is found in <codeph>modules</codeph>, tasks and plans from the version of the module in <codeph>site-modules</codeph> are ignored. Remove a module from <codeph>site-modules</codeph> if you convert it to a standalone module.</p></li><li><p>As a best practice, write automated tests for the tasks and plans in your module, if possible. For information about automated testing patterns, check out these resources: <xref href="https://github.com/puppetlabs/puppetlabs-facts" format="html" scope="external">Example of unit testing plans and integration \(acceptance\) testing tasks</xref> \(GitHub\) and <xref href="https://puppet.com/blog/writing-robust-puppet-bolt-tasks-guide" format="html" scope="external">Writing Robust Puppet Bolt Tasks: A Guide</xref> \(Puppet blog\).</p></li></ul></body></topic></topic>