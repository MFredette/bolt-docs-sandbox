<?xml version="1.0" encoding="UTF-8"?><?path2rootmap-uri ./?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="resolved-issues"><title>Resolved issues</title><prolog><author>Jean Bond &lt;jean@puppet.com\&gt;</author></prolog><body><p>Security and bug fixes in the Bolt 1.x release series.</p></body><related-links><linkpool mapkeyref="bolt-md"><link format="dita" href="bolt_release_notes.md" role="parent" scope="local" type="topic"><linktext>Bolt release notes</linktext></link></linkpool></related-links><topic id="modulepath-now-handles-folder-names-in-uppercase-characters-on-windows-1260"><title>Modulepath now handles folder names in uppercase characters on Windows \(1.26.0\)</title><body><p>Bolt now prints a warning stating that it is case sensitive when the specified path is not found but another path is found with different capitalization. For example, if the actual path is <codeph>C:\User\Administrator\modules</codeph> but the user specifies <codeph>C:\user\administrator\modules</codeph>, a warning states that the specified path was not used and that the correct path is <codeph>C:\User\Administrator\modules</codeph>. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1318" format="html" scope="external">BOLT-1318</xref>\)</p></body></topic><topic id="outmessage-didnt-work-inside-without-default-logging-1250"><title><codeph>out::message</codeph> didn't work inside <codeph>without_default_logging</codeph> \(1.25.0\)</title><body><p>The <codeph>out::message</codeph> standard library plan function now works within a <codeph>without_default_logging</codeph> block. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1406" format="html" scope="external">BOLT-1406</xref>\)</p></body></topic><topic id="task-action-stub-parameter-method-incorrectly-merged-options-and-arguments-1250"><title>Task action stub parameter method incorrectly merged options and arguments \(1.25.0\)</title><body><p>When a task action stub expectation fails, the expected parameters are now properly displayed. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1399" format="html" scope="external">BOLT-1399</xref>\)</p></body></topic><topic id="the-wait-until-available-function-returned-incorrect-results-using-orchestrator-1230"><title>The <codeph>wait_until_available</codeph> function returned incorrect results using orchestrator \(1.23.0\)</title><body><p>When using the PCP transport, the plan function <codeph>wait_until_available</codeph> now returns error results only for targets that can't be reached. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1382" format="html" scope="external">BOLT-1382</xref>\)</p></body></topic><topic id="powershell-tasks-on-localhost-didnt-use-correct-default-ps-args-1230"><title>PowerShell tasks on localhost didn't use correct default PS\_ARGS \(1.23.0\)</title><body><p>PowerShell scripts and tasks run over the local transport on Windows hosts no longer load profiles and are run with the <codeph>Bypass</codeph> execution policy to maintain parity with the WinRM transport. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1358" format="html" scope="external">BOLT-1358</xref>\)</p></body></topic><topic id="inventory-was-loaded-for-commands-that-didnt-use-it-1200"><title>Inventory was loaded for commands that didn't use it \(1.20.0\)</title><body><p>Inventory was loaded even for commands that don't use targets, such as <codeph>bolt task show</codeph>. An error in the inventory could subsequently cause the command to fail. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1268" format="html" scope="external">BOLT-1268</xref>\)</p></body></topic><topic id="yaml-plan-converter-wrapped-single-line-evaluation-steps-1200"><title>YAML plan converter wrapped single-line evaluation steps \(1.20.0\)</title><body><p>The <codeph>bolt plan convert</codeph> command wrapped single-line evaluation steps in a <codeph>with()</codeph> statement unnecessarily. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1299" format="html" scope="external">BOLT-1299</xref>\)</p></body></topic><topic id="file-upload-stalled-with-local-transport-using-run-as-1180"><title>File upload stalled with local transport using <codeph>run-as</codeph> \(1.18.0\)</title><body><p>The <codeph>bolt file upload</codeph> command stalled when using local the local transport if the destination file existed. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1262" format="html" scope="external">BOLT-1262</xref>\)</p></body></topic><topic id="rerun-file-wasnt-generated-without-an-existing-project-directory-1180"><title>Rerun file wasn't generated without an existing project directory \(1.18.0\)</title><body><p>If no Bolt project directory existed, a <codeph>.rerun.json</codeph> file wasn't created, preventing you from rerunning failed commands. Bolt now creates a default project directory when one doesn't exist so that <codeph>.rerun.json</codeph> files are generated as expected. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1263" format="html" scope="external">BOLT-1263</xref>\)</p></body></topic><topic id="selinux-management-didnt-work-on-localhost-1170"><title>SELinux management didn't work on localhost \(1.17.0\)</title><body><p>Bolt now ships with components similar to the Puppet agent to avoid discrepancies between using a puppet-agent to apply Puppet code locally versus using the Bolt puppet-agent. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1244" format="html" scope="external">BOLT-1244</xref>\)</p></body></topic><topic id="linux-implementation-of-the-service-and-package-tasks-returned-incorrect-results-1160"><title>Linux implementation of the service and package tasks returned incorrect results \(1.16.0\)</title><body><p>The PowerShell and bash implementations for the service and package tasks are more robust and provide output more consistent with the Ruby implementation. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1103" format="html" scope="external">BOLT-1103</xref>, <xref href="https://tickets.puppetlabs.com/browse/BOLT-1104" format="html" scope="external">BOLT-1104</xref>\)</p></body></topic><topic id="remote-tasks-could-run-on-non-remote-targets-1150"><title>Remote tasks could run on non-remote targets \(1.15.0\)</title><body><p>Remote tasks can now be run only on remote targets \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1203" format="html" scope="external">BOLT-1203</xref>\)</p></body></topic><topic id="known-hosts-werent-parsed-correctly-1150"><title><codeph>known_hosts</codeph> weren't parsed correctly \(1.15.0\)</title><body><p>Previously, when a valid hostname entry was present in <codeph>known_hosts</codeph> and the <codeph>host-key-check</codeph> SSH configuration option was set, host key validation could fail when a valid IP address was not included in the <codeph>known_hosts</codeph> entry. This behavior was inconsistent with system SSH where the IP address is not required. Host key checking has been updated to match system SSH. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-495" format="html" scope="external">BOLT-495</xref>\)</p></body></topic><topic id="plan-variables-were-visible-to-sub-plans-1150"><title>Plan variables were visible to sub-plans \(1.15.0\)</title><body><p>Variables defined in scope in a plan were visible to sub-plans called with <codeph>run_plan</codeph>. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1190" format="html" scope="external">BOLT-1190</xref>\)</p></body></topic><topic id="the--run-as-option-was-clobbered-by-configuration-1131"><title>The <codeph>_run_as</codeph> option was clobbered by configuration \(1.13.1\)</title><body><p>The <codeph>run-as</codeph> configuration option took precedence over the <codeph>_run_as</codeph> parameter when calling <codeph>run_*</codeph> functions in a plan. The <codeph>_run_as</codeph> parameter now has a higher priority than config or CLI. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1050" format="html" scope="external">BOLT-1050</xref>\)</p></body></topic><topic id="tasks-with-certain-configuration-options-failed-when-using-stdin-1131"><title>Tasks with certain configuration options failed when using <codeph>stdin</codeph> \(1.13.1\)</title><body><p>When both <codeph>interpreters</codeph> and <codeph>run-as</codeph> were configured, tasks that required parameters to be passed over <codeph>stdin</codeph> failed. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1155" format="html" scope="external">BOLT-1155</xref>\)</p></body></topic><topic id="ruby-task-helper-symbolized-only-top-level-parameter-keys-1130"><title>Ruby task helper symbolized only top-level parameter keys \(1.13.0\)</title><body><p>Previously the <codeph>ruby_task_helper``TaskHelper.run</codeph> method symbolized only-top level parameter keys. Now nested keys are also symbolized. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1053" format="html" scope="external">BOLT-1053</xref>\)</p></body></topic><topic id="string-segments-in-commands-had-to-be-triple-quoted-in-powershell-1120"><title>String segments in commands had to be triple-quoted in PowerShell \(1.12.0\)</title><body><p>When running Bolt in PowerShell with commands to be run on \*nix nodes, string segments that could be interpreted by PowerShell needed to be triple-quoted. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-159" format="html" scope="external">BOLT-159</xref>\)</p></body></topic><topic id="unsecured-download-of-the-puppet-agentinstall-task-1110"><title>Unsecured download of the <codeph>puppet_agent::install</codeph> task \(1.11.0\)</title><body><p>The bash implementation of the <codeph>puppet_agent::install</codeph> task now downloads packages over HTTPS instead of HTTP. This fix ensures the download is authenticated and secures against a man-in-the-middle attack.</p></body></topic><topic id="unsecured-download-of-the-puppet-agentinstall-powershell-task-1100"><title>Unsecured download of the <codeph>puppet_agent::install_powershell</codeph> task \(1.10.0\)</title><body><p>The PowerShell implementation of the <codeph>puppet_agent::install</codeph> task now downloads Windows .msi files using HTTPS instead of HTTP. This fix ensures the download is authenticated and secures against a man-in-the-middle attack.</p></body></topic><topic id="bolt-crashed-if-puppetdb-configuration-was-invalid-190"><title>Bolt crashed if PuppetDB configuration was invalid \(1.9.0\)</title><body><p>If an invalid <codeph>puppetdb.conf</codeph> file is detected, Bolt now issues a warning instead of crashing \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-756" format="html" scope="external">BOLT-756</xref>\)</p></body></topic><topic id="local-transport-returned-incorrect-exit-status-190"><title>Local transport returned incorrect exit status \(1.9.0\)</title><body><p>Local transport now correctly returns an exit code instead of the <xref href="https://ruby-doc.org/core-2.5.0/Process/Status.html#method-i-to_i" format="html" scope="external">stat of the process status as an integer</xref>. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1074" format="html" scope="external">BOLT-1074</xref>\)</p></body></topic><topic id="standard-library-functions-werent-packaged-in-180-181"><title>Standard library functions weren't packaged in 1.8.0 \(1.8.1\)</title><body><p>Version 1.8.0 didn't include new standard library functions as intended. This release now includes standard library functions in the gem and packages. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1065" format="html" scope="external">BOLT-1065</xref>\)</p></body></topic><topic id="puppet-agentinstall-task-didnt-match-on-red-hat-180"><title><codeph>puppet_agent::install</codeph> task didn't match on Red Hat \(1.8.0\)</title><body><p>The <codeph>puppet_agent::install</codeph> task now uses updates in the <codeph>facts</codeph> task to resolve Red Hat operating system facts and to download the correct <codeph>puppet-agent</codeph> package. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-997" format="html" scope="external">BOLT-997</xref>\)</p></body></topic><topic id="select-module-content-missing-from-puppet-bolt-package-170"><title>Select module content missing from <codeph>puppet-bolt</codeph> package \(1.7.0\)</title><body><p>Previous releases of the <codeph>puppet-bolt</codeph> package omitted the <codeph>python_task_helper</codeph> and <codeph>ruby_task_helper</codeph> modules. These are now included. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1036" format="html" scope="external">BOLT-1036</xref>\)</p></body></topic><topic id="wait-until-available-function-didnt-work-with-docker-transport-160"><title><codeph>wait_until_available</codeph> function didn't work with Docker transport \(1.6.0\)</title><body><p>We merged the Docker transport and <codeph>wait_until_available</codeph> function in the same release, and they didn't play nicely together. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1018" format="html" scope="external">BOLT-1018</xref>\)</p></body></topic><topic id="python-task-helper-didnt-generate-appropriate-errors-160"><title>Python task helper didn't generate appropriate errors \(1.6.0\)</title><body><p>The Python task helper included with Bolt didn't produce an error if an exception was thrown in a task implemented with the helper. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-1021" format="html" scope="external">BOLT-1021</xref>\)</p></body></topic><topic id="plans-with-no-return-value-werent-marked-complete-in-pe-130"><title>Plans with no return value weren't marked complete in PE \(1.3.0\)</title><body><p>Bolt now correctly reports plan completion to PE for plans that don't return a value. Previously, a plan that didn't return a value incorrectly logged that the plan didn't complete. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-959" format="html" scope="external">BOLT-959</xref>\)</p></body></topic><topic id="some-functions-werent-available-in-the-boltspecplans-library-130"><title>Some functions weren't available in the BoltSpec::Plans library \(1.3.0\)</title><body><p>The BoltSpec::Plans library now supports plans that use <codeph>without_default_logging</codeph> and <codeph>wait_until_available</codeph>, and includes a setup helper that ensures tasks are found and that <codeph>notice</codeph> works. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-971" format="html" scope="external">BOLT-971</xref>\)</p></body></topic><topic id="task-implementation-not-located-relative-to-other-files-in-installdir-120"><title>Task implementation not located relative to other files in installdir \(1.2.0\)</title><body><p>When you use tasks that include shared code, the task executable is located alongside shared code at <codeph>_installdir/MODULE/tasks/TASK</codeph>. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-931" format="html" scope="external">BOLT-931</xref>\)</p></body></topic><topic id="error-when-puppet-agent-task-not-run-as-root-110"><title>Error when puppet\_agent task not run as root \(1.1.0\)</title><body><p>The puppet\_agent task now checks that it is run as root. When run as another user, it prints and fails with a helpful message. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-914" format="html" scope="external">BOLT-878</xref>\)</p></body></topic><topic id="bolt-suppresses-errors-from-transport-110"><title>Bolt suppresses errors from transport \(1.1.0\)</title><body><p>Previously, Bolt suppressed some exception errors thrown by transports. For example, when the ed25519 gem was not present for an Net::SSH process, the NotImplementedError for ed25519 keys would not appear. These errors are now identified and displayed. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-922" format="html" scope="external">BOLT-922</xref>\)</p></body></topic><topic id="loading-boltexecutor-is-breaking-gettext-setup-in-spec-tests-100"><title>Loading bolt/executor is "breaking" gettext setup in spec tests \(1.0.0\)</title><body><p>When Bolt is used as a library, it no longer loads code from r10k unless you explicitly <codeph>require 'bolt/cli'</codeph>.\(<xref href="https://tickets.puppetlabs.com/browse/BOLT-914" format="html" scope="external">BOLT-914</xref>\)</p></body></topic><topic id="deprecated-functions-in-stdlib-result-in-evaluation-error-100"><title>Deprecated functions in stdlib result in Evaluation Error \(1.0.0\)</title><body><p>Manifest blocks will now allow use of deprecated functions from stdlib, and language features governed by the 'strict' setting in Puppet. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-900" format="html" scope="external">BOLT-900</xref>\)</p></body></topic><topic id="bolt-apply-does-not-provide-clientcert-fact-100"><title>Bolt apply does not provide clientcert fact \(1.0.0\)</title><body><p><codeph>apply_prep</codeph> has been updated to collect agent facts as listed in <xref href="https://puppet.com/docs/puppet/latest/lang_facts_and_builtin_vars.html#puppet-agent-facts" format="html" scope="external">Puppet agent facts</xref>. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-898" format="html" scope="external">BOLT-898</xref>\)</p></body></topic><topic id="cprogram-filespuppet-labsboltbinboltbat-is-non-functional-100"><title>C:\\Program Files\\Puppet Labs\\Bolt\\bin\\bolt.bat is non-functional \(1.0.0\)</title><body><p>When moving to Ruby 2.5, the .bat scripts in Bolt packaging reverted to hard-coded paths that were not accurate. As a result Bolt would be unusable outside of PowerShell. The .bat scripts have been fixed so they work from cmd.exe as well. \(<xref href="https://tickets.puppetlabs.com/browse/BOLT-886" format="html" scope="external">BOLT-886</xref>\)</p><p><b>Parent topic:</b><xref href="bolt_release_notes.md" format="dita" type="topic">Bolt release notes</xref></p></body></topic></topic>