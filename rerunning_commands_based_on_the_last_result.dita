<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//PUPPET//DTD DITA Puppet Concept//EN" "concept.dtd">
<concept id="rerunning-based-on-result" class="- topic/topic concept/concept "><title class="- topic/title ">Rerunning commands based on the last result</title><shortdesc class="- topic/shortdesc ">After every execution, Bolt writes information about the result of that run to a <codeph class="+ topic/ph pr-d/codeph ">.rerun.json</codeph> file inside the Bolt project directory. That file can then be used to specify nodes for future commands.</shortdesc><prolog class="- topic/prolog "><author translate="no" type="creator" class="- topic/author ">Melissa Amos &lt;melissa.amos@puppet.com&gt;</author></prolog><conbody class="- topic/body  concept/conbody "><p class="- topic/p ">To attempt to retry a failed action on target nodes, use <codeph class="+ topic/ph pr-d/codeph ">--rerun failure</codeph>. To continue targeting those nodes, pass <codeph class="+ topic/ph pr-d/codeph ">--no-save-rerun</codeph> to prevent updating the file.
            <codeblock class="+ topic/pre pr-d/codeblock ">bolt command run false --nodes all
bolt command run whoami --rerun failure --no-save-rerun</codeblock>
        </p><p class="- topic/p ">If one command is dependent on the success of a previous command, you can target the successful nodes with <codeph class="+ topic/ph pr-d/codeph ">--rerun success</codeph>.
            <codeblock class="+ topic/pre pr-d/codeblock ">bolt task run package action=install name=httpd --nodes all
bolt task run server action=restart name=httpd --rerun success</codeblock>
        </p><note class="- topic/note ">When a plan does not return a <codeph class="+ topic/ph pr-d/codeph ">ResultSet</codeph> object, <ph conkeyref="ProductNames/bolt" class="- topic/ph "/> can't save
information for reruns and <codeph class="+ topic/ph pr-d/codeph ">.rerun.json</codeph> is deleted.</note></conbody></concept>